<!DOCTYPE html>
<html lang="de" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Das Temperatur-Projekt in der Nürnberger Südstadt. Entdecke Live-Klimadaten aus deinem Viertel.">
  <title>NuernbergKlima – Bürgerportal</title>


<link rel="icon" href="./img/favicon.ico" type="image/x-icon">
<link rel="icon" href="./img/favicon-32.png" sizes="32x32" type="image/png">
<link rel="icon" href="./img/favicon-16.png" sizes="16x16" type="image/png">
<link rel="apple-touch-icon" href="./img/apple-touch-icon.png">
<!-- Leaflet-Styles -->
<link rel="stylesheet" href="/leaflet/leaflet.css" />
<link rel="stylesheet" href="/leaflet/MarkerCluster.css" />
<link rel="stylesheet" href="/leaflet/MarkerCluster.Default.css" />
<link rel="stylesheet" href="/styles/main.css" />

<!-- Leaflet & Plugins -->
<script src="/leaflet/leaflet.js" defer></script>
<script src="/leaflet/leaflet.markercluster.js" defer></script>
<script src="/leaflet/leaflet-heat.js" defer></script>

<!-- Karte-Script -->
<script src="/scripts/i18n.js" defer></script>
<script src="/scripts/map.js" defer></script>

</head>
<body>

  <!-- <a href="#main-content" class="skip-link">Zum Hauptinhalt springen</a> -->

  <header class="header">
    <div class="container nav-container">
      
      <a href="#" class="logo">
        <img src="img/logo_transparent.png" alt="NuernbergKlima Logo" data-i18n="common.logo_alt" data-i18n-attr="alt" />
      </a>
      
      <nav class="nav-desktop">
        <a href="#map-section" data-i18n="nav.map">Karte</a>
        <a href="#about" data-i18n="nav.about">Über Uns</a>
        <a href="#impressum" class="btn btn-primary" data-i18n="nav.contact">Kontakt</a>
        <select id="lang-select" aria-label="Language selector" style="margin-left:1rem; width:60px; padding:0.25rem;">
          <option value="de">DE</option>
          <option value="en">EN</option>
        </select>
      </nav>

      <button id="mobile-menu-btn" class="mobile-menu-btn" aria-label="Menü öffnen" data-i18n="nav.menu" data-i18n-attr="aria-label">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
        </svg>
      </button>
    </div>

    <div id="mobile-menu" class="mobile-menu">
      <nav>
        <a href="#map-section" data-i18n="nav.map">Karte</a>
        <a href="#about" data-i18n="nav.about">Über Uns</a>        
        <a href="#kontakt" class="btn btn-primary" data-i18n="nav.imprint">Impressum</a>
      </nav>
    </div>
  </header>

  <main id="main-content">
    <section class="hero">
      <div class="container">
        <h1 data-i18n="hero.title">Gemeinsam für ein besseres Stadtklima</h1>
        <p data-i18n="hero.subtitle">
          NuernbergKlima.de sammelt und visualisiert Echtzeit-Klimadaten aus Nürnberg. Sieh nach, wo es besonders heiß ist und wo es kühlere Plätze gibt!
        </p>
      </div>
    </section>

    <section id="map-section">
      <div class="container">
        <div class="stats-grid">
          <div class="stat-card"><h3>--.-°C</h3><span data-i18n="stats.max_today">höchste Temperatur heute</span></div>
          <div class="stat-card"><h3>--</h3><span data-i18n="stats.sensors_active">Sensoren aktiv</span></div>
          <div class="stat-card"><h3>--.- °C</h3><span data-i18n="stats.max_diff_today">größter Temperaturunterschied heute</span></div>
          <div class="stat-card"><h3>--.- °C</h3><span data-i18n="stats.min_today">niedrigste Temperatur  heute</span></div>
        </div>
        <div id="map"></div>
        <div class="time-control" style="margin-top:1rem; display:flex; align-items:center; gap:1rem;">
          <input
            id="time-slider"
            type="range"
            min="0"
            max="0"
            step="1"
            style="flex:1;"
          />
          <span id="selected-time" style="white-space:nowrap;color:#4b5563;">—</span>
        </div>
      </div>
    </section>

    <section id="about" class="about-section about-modern" aria-labelledby="about-title">
      <div class="container">
        <header class="about-header">
          <h2 id="about-title"><span data-i18n="about.title_prefix">Was macht</span> <span class="gradient-text">NuernbergKlima.de</span><span data-i18n="about.title_suffix">?</span></h2>
          <p class="lead" data-i18n="about.lead">
            Gemeinsam zeigen wir in Echtzeit, wie unterschiedlich sich Hitze in Nürnbergs Südstadt verteilt – offen, verständlich und für alle zugänglich.
          </p>

        </header>
    
        <div class="feature-grid">
          <article class="feature">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="10" y="3" width="4" height="12" rx="2" ry="2"></rect>
                <circle cx="12" cy="19" r="4"></circle>
                <line x1="12" y1="7" x2="12" y2="14"></line>
              </svg>
            </div>
            <h3 data-i18n="about.features.what.title">Was ist NuernbergKlima.de?</h3>
            <p data-i18n="about.features.what.text">
              Mit diesem Projekt möchten wir gemeinsam herausfinden, wie warm (oder kalt) es an verschiedenen Orten in der Südstadt ist.
            </p>
          </article>
    
          <article class="feature">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="10" width="7" height="10" rx="1"></rect>
                <rect x="14" y="6" width="7" height="14" rx="1"></rect>
                <path d="M6.5 13h0.01M6.5 16h0.01M17.5 9h0.01M17.5 12h0.01M17.5 15h0.01"></path>
              </svg>
            </div>
            <h3 data-i18n="about.features.why.title">Wieso machen wir das?</h3>
            <p data-i18n="about.features.why.text">
              Extreme Hitze betrifft immer mehr Städte. Die Temperatur kann aber sogar innerhalb eines Viertels ganz unterschiedlich sein, z. B. je nachdem, wie viel Grün es gibt oder wie eng die Bebauung ist. Unsere Sensoren messen daher die Temperatur an verschiedenen Standorten. Die Daten werden anonym erfasst und auf unserer Karte in Echtzeit visualisiert.
            </p>
          </article>
    
          <article class="feature">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <ellipse cx="12" cy="5" rx="8" ry="3"></ellipse>
                <path d="M4 5v6c0 1.66 3.58 3 8 3s8-1.34 8-3V5"></path>
                <path d="M4 11v6c0 1.66 3.58 3 8 3s8-1.34 8-3v-6"></path>
              </svg>
            </div>
            <h3 data-i18n="about.features.data.title">Was passiert mit den Daten?</h3>
            <p data-i18n="about.features.data.text">
              Alle Messwerte sind öffentlich einsehbar. So können alle sehen, wo es besonders heiß wird und wo es kühler bleibt. Damit wollen wir sichtbar machen, welche Ecken unseres Viertels besonders mit Hitze zu kämpfen haben – und dabei helfen, gemeinsam Lösungen zu finden, um unsere Nachbarschaft klimafreundlicher zu gestalten.
            </p>
          </article>
    
          <article class="feature">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="8" cy="8" r="3"></circle>
                <path d="M8 14c-3 0-5 1.5-5 3v2"></path>
                <circle cx="17" cy="9" r="3"></circle>
                <path d="M17 15c-2.5 0-4.5 1.2-4.9 2.8"></path>
              </svg>
            </div>
            <h3 data-i18n="about.features.who.title">Wer macht das?</h3>
            <p data-i18n="about.features.who.text">
              Das Projekt ist eine Initiative von Hackerbande Nürnberg bestehend aus Leuten wie dir. Wir freuen uns über Unterstützung oder Feedback!
            </p>
          </article>
        </div>
    
        <div class="note" role="note">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <circle cx="12" cy="16" r="1"></circle>
          </svg>
          <p data-i18n="about.note">Alle Daten sind anonymisiert und frei nutzbar. Hinweise & Ideen sind willkommen.</p>

        </div>
      </div>
    </section>
    
    


    <section class="sponsors-section">
      <div class="container">
          <h2 data-i18n="sponsors.title">Das Projekt wird im Rahmen von „Was wäre,  wenn...?“ von der Nationalen Stadtentwicklungspolitik durch das Bundesministerium für Wohnen, Stadtentwicklung und Bauwesen (BMWSB) gefördert.</h2>
          <div class="logo-grid">
              <a href="https://www.waswaerewenn2035.de/" target="_blank" rel="noopener noreferrer">
                  <img src="/img/UL_WWW_Wortmarke_Schwarz+Slogan.png" alt="Waswarewenn2035">
              </a>
              <a href="https://www.urbanlab-nuernberg.de/" target="_blank" rel="noopener noreferrer">
                  <img src="/img/UL_Logo_grey.png" alt="Urbanlab Nürnberg">
              </a>
              <a href="https://www.nationale-stadtentwicklungspolitik.de/" target="_blank" rel="noopener noreferrer">
                <img src="/img/NSP_Logo_DE_CMYK.jpg" alt="Nationale Stadtentwicklungspolitik">
            </a>
            <a href="https://www.bmwsb.bund.de/" target="_blank" rel="noopener noreferrer">
              <img src="/img/bmwsb_2021_WebSVG_de.svg" alt="Bundesministerium für Wohnen, Stadtentwicklung und Bauwesen">
          </a>
          </div>
      </div>
  </section>

  <section id="impressum" class="impressum-section">
    <div class="container">
        <h2 data-i18n="imprint.title">Impressum</h2>
        
        <p>
            Koitka, Mirring, Schädlich GbR<br>
            Flaschenhofstraße 4<br>
            90402 Nürnberg<br>
        </p>
        <p>
            <strong data-i18n="imprint.represented_by">Vertreten durch:</strong><br>
            Daniel Schädlich
        </p>
        <p>
            <strong data-i18n="imprint.contact">Kontakt:</strong><br>                
            E-Mail: climateguard@hackerban.de
        </p>
        <p>
            <strong data-i18n="imprint.responsible">Verantwortlich für den Inhalt:</strong><br>
            Daniel Schädlich<br>
            Thomas-Mann-Str. 37<br>
            90513 Zirndorf
        </p>
    </div>
</section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>© <span id="year"></span> NuernbergKlima.de by Hackerban.de | Visitors: <span id="visitor-counter">...</span></p>
    </div>
  </footer>



  <script>
    // --- Mobile Menu Toggle ---
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuBtn.addEventListener('click', () => {
      // Toggle the 'display' property
      if (mobileMenu.style.display === 'block') {
        mobileMenu.style.display = 'none';
      } else {
        mobileMenu.style.display = 'block';
      }
    });

    // --- Footer Year ---
    document.getElementById('year').textContent = new Date().getFullYear();

    // --- Visitor Counter ---
    (async function updateVisitorCount() {
      try {
        // Increment visitor count and get new count in one request
        const response = await fetch('/api/counter/increment', { method: 'POST' });
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        const data = await response.json();

        // Update the UI
        const visitorCountElement = document.getElementById('visitor-counter');
        if (visitorCountElement) {
          visitorCountElement.textContent = data.count;
        }
      } catch (error) {
        console.error('Error fetching visitor count:', error);
        const visitorCountElement = document.getElementById('visitor-counter');
        if (visitorCountElement) {
          visitorCountElement.textContent = 'N/A';
        }
      }
    })();
    // The map initialization is now expected to be in /scripts/map.js
  </script>
</body>
</html>
